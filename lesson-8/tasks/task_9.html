<!DOCTYPE html>
<html lang="uk">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Task 9</title>
	</head>
	<body>
		<h3>
			Задача 9. Морський бій. Користувач вводить кількість клітинок одновимірного масиву та кількість одиночних
			кораблів. Комп’ютер довільно розміщує ці одиночні кораблі у масиві по один у клітинці (якщо у клітинці 0, то
			клітинка пуста, якщо 1 – то це означає, що там є корабель. Користувач вводить номер клітинки, куди стріляє. Гра
			продовжується до тих пір, поки не будуть потоплені усі кораблі.
		</h3>
		<style></style>
		<script>
			/*
			//Сформувати поле гри
			// Гра користувача
			// 1 Пункт
			function getRandomNumber(minV, maxV) {
				return minV + Math.floor(Math.random() * (maxV - minV + 1));
			}
			function getFreeCell(gameFiled) {
				let shipIndex;
				const lastIndex = gameFiled.length - 1;
				do {
					shipIndex = getRandomNumber(0, lastIndex);
				} while (gameFiled[shipIndex] === 1);
				return shipIndex;
			}
			function createGameField(cellsNumber, shipsNumber) {
				const gameField = new Array(cellsNumber).fill(0);
				for (let i = 0; i < cellsNumber; i++) {
					let shipIndex = getFreeCell(gameField);
					gameField[shipIndex] = 1;
				}
				console.log(gameField);
				return gameField;
			}
			function game(gameField, shipsNumber) {
				do {
					// Спитати у користувача номер клітинки
					const userStrikePosition = parseInt(prompt(`куди стріляємо (1 -${gameField.length}?`)) - 1;

					if (gameField[userStrikePosition] === 1) {
						shipsNumber--;
						alert('Попали');
						gameField[userStrikePosition] = 0;
					} else alert('Промазав');
					// Якщо у дані позиції то кількість кораблів зменшуємо і
					// повідомляємо користувачу
					// інакше
					// кажемо що він промазав
				} while (shipsNumber > 0);
			}
			const gameField = createGameField(10, 3);
			game(gameField, 3);
			*/

			let userInputNumArr = parseInt(prompt('Введіть кількість клітинок одновимірного масиву: ', '5'));
			let userInputNumShips = parseInt(prompt('Введіть кількість одиночних кораблів', '2'));

			let arrMap = new Array(userInputNumArr).fill(0);
			console.log(arrMap);
			for (let i = 0; i < userInputNumShips; i++) {
				let shipPos = Math.floor(Math.random() * userInputNumArr);
				arrMap[shipPos] = 1;
			}
			// головний цикл гри
			while (true) {
				document.write(`Масив елементів${arrMap} <br> <br>`);
				console.log(arrMap);

				// запитуємо хід гравця
				let shootNum = parseInt(prompt('Введіть номер клітинки: '));
				if (arrMap[shootNum] == 1) {
					alert('Ви потопили корабель!');
					arrMap[shootNum] = 0;
					continue;
				} else {
					alert('Промах!');
				}

				// перевіряємо, чи залишилися ще кораблі
				if (!arrMap.includes(1)) {
					alert('Ви виграли!');
					document.write('Ви виграли!');
					break;
				}
			}
		</script>
	</body>
</html>
