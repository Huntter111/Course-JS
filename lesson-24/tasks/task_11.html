<!DOCTYPE html>
<html lang="uk">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Task 11</title>
		<style>
			.bg {
				width: 300px;
				height: 300px;
				border: 2px solid black;
				margin-top: 40px;
				margin-left: 300px;
			}
		</style>
	</head>
	<body>
		<h3>
			Задача 11. Користувач може змінювати колір фону, що вибирає користувач з використанням. <code> &lt;input type="color"&gt;</code><br />
			Зберігати цей колір і відновлювати при наступному відкритті. <br />
			Також зберігати і відображати кількість змін протягом одного сеансу.
		</h3>

		<label for="color-picker">Color:</label>
		<input type="color" value="#ff0000" id="color-picker" />
		<div class="bg"></div>
		<script>
			window.addEventListener('load', startup, false);
			let colorPicker;
			let newBg;

			const defaultColor = localStorage.getItem('color');
			window.addEventListener('load', startup, false);
			function startup() {
				const bg = document.querySelector('.bg');
				bg.style.backgroundColor = defaultColor;
				colorPicker = document.querySelector('#color-picker');
				colorPicker.value = defaultColor;
				colorPicker.addEventListener('input', updateFirst, false);
				colorPicker.select();
			}
			function updateFirst(event) {
				let count = 0;
				const bg = document.querySelector('.bg');
				if (bg) {
					newBg = bg.style.backgroundColor = event.target.value;
					count++;
					console.log('count:', count);
				}

				localStorage.setItem('color', newBg);
				localStorage.setItem('count', count);
			}
		</script>
	</body>
</html>
